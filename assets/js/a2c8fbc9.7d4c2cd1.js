"use strict";(self.webpackChunkmirage_docs=self.webpackChunkmirage_docs||[]).push([[2803],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>h});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),d=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=d(t),h=i,u=m["".concat(s,".").concat(h)]||m[h]||c[h]||r;return t?a.createElement(u,o(o({ref:n},p),{},{components:t})):a.createElement(u,o({ref:n},p))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var d=2;d<r;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6370:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var a=t(87462),i=(t(67294),t(3905));const r={sidebar_position:5},o="Sync Settings",l={unversionedId:"guides/sync/sync-settings",id:"guides/sync/sync-settings",title:"Sync Settings",description:"The Sync Settings can be found in each NetworkBehaviour component. It is only visible in the inspector when there are either SyncVar, SyncObject, or if OnSerialize is overridden. These settings allow you to configure how and when data is synchronized across the network.",source:"@site/docs/guides/sync/sync-settings.md",sourceDirName:"guides/sync",slug:"/guides/sync/sync-settings",permalink:"/Mirage/docs/guides/sync/sync-settings",draft:!1,editUrl:"https://github.com/MirageNet/Mirage/tree/main/doc/docs/guides/sync/sync-settings.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"docs",previous:{title:"Sync Sorted Set",permalink:"/Mirage/docs/guides/sync/sync-objects/sync-sorted-set"},next:{title:"serialization-flow",permalink:"/Mirage/docs/guides/sync/serialization-flow"}},s={},d=[{value:"Sync Direction",id:"sync-direction",level:2},{value:"When to use Server to Owner",id:"when-to-use-server-to-owner",level:3},{value:"Sync Timing",id:"sync-timing",level:2},{value:"Variable",id:"variable",level:3},{value:"Fixed",id:"fixed",level:3},{value:"Example of Fixed vs Variable",id:"example-of-fixed-vs-variable",level:4},{value:"NoInterval",id:"nointerval",level:3},{value:"When are changes sent?",id:"when-are-changes-sent",level:2}],p={toc:d};function c(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"sync-settings"},"Sync Settings"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Sync Settings")," can be found in each ",(0,i.kt)("inlineCode",{parentName:"p"},"NetworkBehaviour")," component. It is only visible in the inspector when there are either ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncVar"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncObject"),", or if ",(0,i.kt)("inlineCode",{parentName:"p"},"OnSerialize")," is overridden. These settings allow you to configure how and when data is synchronized across the network. "),(0,i.kt)("p",null,"Using the ",(0,i.kt)("inlineCode",{parentName:"p"},"Sync Settings"),", you can set the direction values are synced and how often they are sent."),(0,i.kt)("h2",{id:"sync-direction"},"Sync Direction"),(0,i.kt)("p",null,"SyncDirection determines which directions changes are sent. The default sync direction is from ",(0,i.kt)("inlineCode",{parentName:"p"},"Server")," to both ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Observers"),". "),(0,i.kt)("p",null,"The directions can be set per NetworkBehaviour, which means that different components can have different sync directions. For example, a PlayerName component can be set to sync from the ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner")," and a Health component from the ",(0,i.kt)("inlineCode",{parentName:"p"},"Server"),"."),(0,i.kt)("p",null,"Valid sync directions include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Sync from ",(0,i.kt)("inlineCode",{parentName:"li"},"Server")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"Owner")," and/or ",(0,i.kt)("inlineCode",{parentName:"li"},"Observers")," (Default)"),(0,i.kt)("li",{parentName:"ul"},"Sync from ",(0,i.kt)("inlineCode",{parentName:"li"},"Owner")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"Server")," and/or ",(0,i.kt)("inlineCode",{parentName:"li"},"Observers")),(0,i.kt)("li",{parentName:"ul"},"Sync from both ",(0,i.kt)("inlineCode",{parentName:"li"},"Owner")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"Server")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"Observers")," only"),(0,i.kt)("li",{parentName:"ul"},"No sync direction (None to None), nothing will be synced.")),(0,i.kt)("p",null,"Invalid sync directions include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Sync from ",(0,i.kt)("inlineCode",{parentName:"li"},"None")," to any direction"),(0,i.kt)("li",{parentName:"ul"},"Sync from ",(0,i.kt)("inlineCode",{parentName:"li"},"Owner")," to None or ",(0,i.kt)("inlineCode",{parentName:"li"},"Server")," to None"),(0,i.kt)("li",{parentName:"ul"},"Sync from ",(0,i.kt)("inlineCode",{parentName:"li"},"Server")," to Owner only"),(0,i.kt)("li",{parentName:"ul"},"Sync from both Owner and ",(0,i.kt)("inlineCode",{parentName:"li"},"Server")," to Owner only")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},"ObserversOnly")," excludes the ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner"),". In order to sync to owner the ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner")," Flag must be set.")),(0,i.kt)("p",null,"If syncing from both ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Server")," at the same time, there will be a race condition. If they both update a value at the same time, they will both send an update to the other side which will set the value and cause them to be out of sync. While this option is allowed, it is advised to only sync from either ",(0,i.kt)("inlineCode",{parentName:"p"},"Server")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner"),"."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"[Flags/Bitmasks]"),(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncFrom")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncTo")," fields are flag enums. This means you can combine multiple values. For example, in ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncTo")," you can select both ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ObserversOnly")," to send data to both. These enums work as bitmasks, so combining flags is done using a bitwise OR operation."),(0,i.kt)("p",{parentName:"admonition"},"It is important to understand how the ",(0,i.kt)("inlineCode",{parentName:"p"},"None")," flag works. When you combine ",(0,i.kt)("inlineCode",{parentName:"p"},"None")," with another flag, like ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner"),", the result is just ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner"),", the ",(0,i.kt)("inlineCode",{parentName:"p"},"None")," flag is essentially ignored. Some UI might display the enum as ",(0,i.kt)("inlineCode",{parentName:"p"},"None | Owner"),", but this simply means that only the ",(0,i.kt)("inlineCode",{parentName:"p"},"Owner")," flag is active.")),(0,i.kt)("h3",{id:"when-to-use-server-to-owner"},"When to use Server to Owner"),(0,i.kt)("p",null,"In some case you don't want some data to be visible to other players. By disabling the ",(0,i.kt)("inlineCode",{parentName:"p"},"ObserversOnly")," flag Mirage will only send data to the Player that owns the object."),(0,i.kt)("p",null,"For example, suppose you are making an inventory system. Suppose players A, B, and C are in the same area. There will be a total of 12 objects in the entire network, objects in bold are owned by that client:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Client A has ",(0,i.kt)("strong",{parentName:"li"},"Player A"),", Player B, and Player C"),(0,i.kt)("li",{parentName:"ul"},"Client B has Player A, ",(0,i.kt)("strong",{parentName:"li"},"Player B"),", and Player C"),(0,i.kt)("li",{parentName:"ul"},"Client C has Player A, Player B, and ",(0,i.kt)("strong",{parentName:"li"},"Player C")),(0,i.kt)("li",{parentName:"ul"},"The server has Player A, Player B, Player C")),(0,i.kt)("p",null,"each one of them would have an Inventory component"),(0,i.kt)("p",null,"Suppose Player A picks up some loot. The server adds the loot to Player's A inventory, which could have a ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/sync/sync-objects/sync-list"},"SyncLists")," of Items. "),(0,i.kt)("p",null,"By default, Mirage now has to synchronize player A's inventory everywhere, which means sending an update message to client A, client B, and client C, because they all have a copy of Player A. This is wasteful, Client B and Client C do not need to know about Player's A inventory, they never see it on screen. It is also a security problem, someone could hack the client and display other people's inventory and use it to their advantage."),(0,i.kt)("p",null,"By only having ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncTo.Owner")," set the server will only send then Player A's to Client A, Player B's to Client B, etc.  "),(0,i.kt)("p",null,"It might not seem like much of a waste with only 3 players, but say if you have 50 instead the that is a lot of extra data to sending to each client."),(0,i.kt)("p",null,"Other typical use cases include quests, player's hand in a card game, skills, experience, or any other data you don't need to share with other players."),(0,i.kt)("h2",{id:"sync-timing"},"Sync Timing"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncTiming")," determines how the minium time between changes being sent. Values are not sent unless they are changed or manually set as dirty."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncTiming")," enum has the following values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Variable")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Fixed")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"NoInterval"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Variable")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Fixed")," will use the Interval field to determine how often changes are sent. ",(0,i.kt)("inlineCode",{parentName:"p"},"NoInterval")," will sent changes next time Update is run"),(0,i.kt)("h3",{id:"variable"},"Variable"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Variable")," timing mode waits for at least the specified ",(0,i.kt)("inlineCode",{parentName:"p"},"Interval")," time after the last sync before sending again. This timing mode is best used when values don't change often or for non-time-critical data. Compared to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Fixed")," timing mode, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Variable")," timing mode sends data less often for the same ",(0,i.kt)("inlineCode",{parentName:"p"},"Interval"),". "),(0,i.kt)("h3",{id:"fixed"},"Fixed"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Fixed")," timing mode ensures that data is sent every ",(0,i.kt)("inlineCode",{parentName:"p"},"Interval")," if changed. This timing mode is best used for data that changes often and you want exactly ",(0,i.kt)("inlineCode",{parentName:"p"},"(1 / Interval)")," updates per second. The ",(0,i.kt)("inlineCode",{parentName:"p"},"Fixed")," timing mode has a more consistent sync time compared to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Variable")," timing mode. "),(0,i.kt)("h4",{id:"example-of-fixed-vs-variable"},"Example of Fixed vs Variable"),(0,i.kt)("p",null,"For example, if ",(0,i.kt)("inlineCode",{parentName:"p"},"Interval")," is 0.1, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Fixed")," timing mode will send data at a constant rate of 10 times per second, while the ",(0,i.kt)("inlineCode",{parentName:"p"},"Variable")," timing mode will depend more on the deltaTime and may send data at irregular intervals. This means that ",(0,i.kt)("inlineCode",{parentName:"p"},"Variable")," mode will send less often/"),(0,i.kt)("h3",{id:"nointerval"},"NoInterval"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"NoInterval")," timing mode ignores ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncSettings.Interval")," and sends changes in the next update. This timing mode is best used for scenarios where data changes frequently and sending updates as soon as possible is desired."),(0,i.kt)("h2",{id:"when-are-changes-sent"},"When are changes sent?"),(0,i.kt)("p",null,"When a value is changed, the corresponding ",(0,i.kt)("inlineCode",{parentName:"p"},"NetworkBehaviour")," is added to a list of dirty objects. This list is then looped over during each update, and changes are sent while taking the ",(0,i.kt)("inlineCode",{parentName:"p"},"SyncInterval")," into account."),(0,i.kt)("p",null,"This means that the server only has to loop over a small number of objects each frame - only the objects that have changed. This is a significant improvement in performance, especially when there are a large number of idle network objects."),(0,i.kt)("p",null,"In contrast, other networking solutions like Mirror Networking loop over every object every update, regardless of whether it has changed or not."),(0,i.kt)("p",null,"Because of this improvement, certain tasks can be accomplished more easily in Mirage. For example, if you have a forest with individual trees represented by NetworkIdentity, they will not add any performance cost unless the player interacts with them. This allows you to use RPCs and SyncVars on each tree, making it easier to create network features without needing workarounds for performance reasons."))}c.isMDXComponent=!0}}]);