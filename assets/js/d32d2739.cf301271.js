"use strict";(self.webpackChunkmirage_docs=self.webpackChunkmirage_docs||[]).push([[972],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>u});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},h=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=l(t),u=a,m=h["".concat(c,".").concat(u)]||h[u]||p[u]||o;return t?r.createElement(m,i(i({ref:n},d),{},{components:t})):r.createElement(m,i({ref:n},d))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=h;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}h.displayName="MDXCreateElement"},3515:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var r=t(87462),a=(t(67294),t(3905));const o={sidebar_position:7},i="Network Scene Manager",s={unversionedId:"components/network-scene-manager",id:"components/network-scene-manager",title:"Network Scene Manager",description:"The Network Scene Manager component controls the Unity Scenes running over the network.",source:"@site/docs/components/network-scene-manager.md",sourceDirName:"components",slug:"/components/network-scene-manager",permalink:"/Mirage/docs/components/network-scene-manager",draft:!1,editUrl:"https://github.com/MirageNet/Mirage/tree/main/doc/docs/components/network-scene-manager.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"docs",previous:{title:"Network Match Checker",permalink:"/Mirage/docs/components/network-match-checker"},next:{title:"Network Animator",permalink:"/Mirage/docs/components/network-animator"}},c={},l=[{value:"How does it work",id:"how-does-it-work",level:2},{value:"How do I change scenes",id:"how-do-i-change-scenes",level:2}],d={toc:l};function p(e){let{components:n,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},d,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"network-scene-manager"},"Network Scene Manager"),(0,a.kt)("p",null,"The Network Scene Manager component controls the Unity Scenes running over the network."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Network Scene Checker component",src:t(69957).Z,width:"672",height:"477"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Client Change Scene"),(0,a.kt)("br",{parentName:"li"}),"The event that fires before the client changes scenes."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Client Changed Scene"),(0,a.kt)("br",{parentName:"li"}),"The event that fires after the client changes scenes."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Server Change Scene"),(0,a.kt)("br",{parentName:"li"}),"The event that fires before the server changes scenes."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Server Changed Scene"),(0,a.kt)("br",{parentName:"li"}),"The event that fires after the server changes scenes."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Player Scene Ready"),"\nThe event that fires on the server, after Client sends ",(0,a.kt)("inlineCode",{parentName:"li"},"SceneReadyMessage")," to the server.")),(0,a.kt)("p",null,"The Network Scene Manager allows the user to change network scenes during runtime. There are three types of scene changes broadly supported by Mirage: Normal, Additive Load, and Additive Unload."),(0,a.kt)("p",null,"Normal: In a Normal scene change all currently loaded assets are unspawned and unloaded. The new scene is loaded and set active. Then all of the scene or instance network objects can be spawned. Under this operation, the client waits for the server to finish before spawning starts to prevent any race conditions."),(0,a.kt)("p",null,"Additive Load: The specified scene will be loaded on the Server and Client in addition to the currently active network scene."),(0,a.kt)("p",null,"Additive Unload: Unload a previously loaded additive scene from the Server and Client."),(0,a.kt)("h2",{id:"how-does-it-work"},"How does it work"),(0,a.kt)("p",null,"When the NetworkServer starts it assumes the initial scene is the one you plan on running the network on. If this is not correct you can either change scenes before starting the network or after. The order on the server will likely only matter to you if you are running in Host mode."),(0,a.kt)("p",null,"Once a NetworkClient connects and passes authentication the NetworkServer will send a message notifying them of the currently active scene and any additive scenes they should load. Once that task is complete then the server will start spawning network objects on the NetworkClient."),(0,a.kt)("h2",{id:"how-do-i-change-scenes"},"How do I change scenes"),(0,a.kt)("p",null,"If the scene change involves network objects then it is strongly recommended to make any scene changes via the NetworkSceneManager. Doing so via Unity's SceneManager directly may function but give undesired results with network objects."),(0,a.kt)("p",null,"To do a network scene change you initiate the process via the server NetworkSceneManager via:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'// For normal scene changes\nsceneManager.ServerLoadSceneNormal("Assets/GameScene.unity");\n\n// For additive scene loading\nsceneManager.ServerLoadSceneAdditively("Assets/AdditiveScene.unity", players);\n\n// For additive scene unloading\nsceneManager.ServerUnloadSceneAdditively(scene, players);\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"You don't have to provide the full scene path when initiating a scene change. But the 'NetworkSceneName' will be saved as the full path.")))}p.isMDXComponent=!0},69957:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/NetworkSceneManager-7d9b531c9491d703c5640cd4edcaaa5e.png"}}]);